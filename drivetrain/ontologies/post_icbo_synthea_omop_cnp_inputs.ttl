# baseURI: https://unnamed/acorn/inputs
# prefix: inputs

@prefix : <https://unnamed/acorn/post_icbo_synthea_omop_cnp_inputs/> .
@prefix drivetrain: <https://github.com/PennTURBO/Drivetrain/> .
@prefix efo: <http://www.ebi.ac.uk/efo/> .
@prefix obo: <http://purl.obolibrary.org/obo/> .
@prefix oboInOwl: <http://www.geneontology.org/formats/oboInOwl#> .
@prefix ontologies: <http://transformunify.org/ontologies/> .
@prefix owl: <http://www.w3.org/2002/07/owl#> .
@prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@prefix sdvg: <http://api.stardog.com/> .
@prefix turbo: <http://transformunify.org/ontologies/> .
@prefix turboOnt: <https://raw.githubusercontent.com/PennTURBO/Turbo-Ontology/master/ontologies/turbo_merged.owl> .
@prefix xml: <http://www.w3.org/XML/1998/namespace> .
@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .

<http://api.stardog.com/visit_occurrence> a owl:Class .
<http://api.stardog.com/person> a owl:Class .
<http://api.stardog.com/procedure_occurrence> a owl:Class .
<http://api.stardog.com/measurement> a owl:Class .
<http://api.stardog.com/condition_occurrence>  a owl:Class .

drivetrain:star a drivetrain:PredicateSuffixSymbol ;
  drivetrain:usesSparqlOperator '*' ;
.

drivetrain:post_icbo_synthea_omop_cnp_patients
  a ontologies:TURBO_0010354 ;
  drivetrain:hasOutput drivetrain:CridDenotesPatient;
  drivetrain:hasOutput drivetrain:DobAboutSns ;
  drivetrain:hasOutput drivetrain:DobHasMeasVal ;
  drivetrain:hasOutput drivetrain:DobPartOfColumn ;
  drivetrain:hasOutput drivetrain:GidAboutPatient ; 
  drivetrain:hasOutput drivetrain:GidHasRepresentation ;
  drivetrain:hasOutput drivetrain:GidPartOfColumn ;
  drivetrain:hasOutput drivetrain:GidTypingRecipe ;
  drivetrain:hasOutput drivetrain:HardcodedPatientRegden ;
  drivetrain:hasOutput drivetrain:HardcodedPatientSourceden ; 
  drivetrain:hasOutput drivetrain:KeyDenotesDob ;
  drivetrain:hasOutput drivetrain:KeyDenotesGid ;
  drivetrain:hasOutput drivetrain:KeyDenotesPatKeySymb ;
  drivetrain:hasOutput drivetrain:KeyDenotesPatient ;
  drivetrain:hasOutput drivetrain:KeyDenotesRid ;
  drivetrain:hasOutput drivetrain:KeyPartOfColumn ;
  drivetrain:hasOutput drivetrain:PatCridsymbHasRepresentation ;
  drivetrain:hasOutput drivetrain:PatKeySymbHasRepresentation ;
  drivetrain:hasOutput drivetrain:PatKeySymbPartOfColumn ;
  drivetrain:hasOutput drivetrain:PatKeySymbPartOfKey ;
  drivetrain:hasOutput drivetrain:PatientBornOnSns ;
  drivetrain:hasOutput drivetrain:PatientExpansionSpecification ;
  drivetrain:hasOutput drivetrain:PatientHasRole;
  drivetrain:hasOutput drivetrain:RidAboutPatient ;
  drivetrain:hasOutput drivetrain:RidHasRepresentation ;
  drivetrain:hasOutput drivetrain:RidPartOfColumn ;
  drivetrain:hasOutput drivetrain:RidTypingRecipe ;
  drivetrain:hasOutput drivetrain:symbolPartOfCridForPatient ;
  drivetrain:hasRequiredInput drivetrain:GidOmopConceptIds ;
  drivetrain:hasRequiredInput drivetrain:GidScoGid ;
  drivetrain:hasRequiredInput drivetrain:PatientCridsymShortcut ;
  drivetrain:hasRequiredInput drivetrain:PatientDobShortcut ;
  drivetrain:hasRequiredInput drivetrain:PatientGidShortcut ;
  drivetrain:hasRequiredInput drivetrain:PatientKeySymShortcut ;
  drivetrain:hasRequiredInput drivetrain:PatientRidShortcut ;
  drivetrain:hasRequiredInput drivetrain:RidOmopConceptIds ;
  drivetrain:hasRequiredInput drivetrain:RidScoStarRid ;
  drivetrain:inputNamedGraph ontologies:omopShortcuts ;
  drivetrain:outputNamedGraph ontologies:omopExpanded ;
  drivetrain:precedes drivetrain:post_icbo_synthea_omop_cnp_encs ;
.

drivetrain:GidScoGid a drivetrain:objectConnectionToTermRecipe ;
   drivetrain:multiplicity drivetrain:1-1 ;
   drivetrain:referencedInGraph <https://raw.githubusercontent.com/PennTURBO/Turbo-Ontology/master/ontologies/turbo_merged.owl> ;
   drivetrain:subject drivetrain:GidClassList ;
   drivetrain:predicate rdfs:subClassOf ;
   drivetrain:object obo:OMRSE_00000133 ;
.

drivetrain:GidOmopConceptIds 
  a drivetrain:DatatypeConnectionRecipe ;
  drivetrain:referencedInGraph <https://raw.githubusercontent.com/PennTURBO/Turbo-Ontology/master/ontologies/turbo_merged.owl> ;
  drivetrain:multiplicity drivetrain:1-1 ;
  drivetrain:subject drivetrain:GidClassList ;
  drivetrain:predicate ontologies:TURBO_0010147 ;
  drivetrain:object drivetrain:gender_concept_id_IntegerLiteralValue ;
.
drivetrain:PatientGidShortcut
  a drivetrain:DatatypeConnectionRecipe ;
  drivetrain:multiplicity drivetrain:1-1 ;
  drivetrain:subject <http://api.stardog.com/person> ;
  drivetrain:predicate <http://api.stardog.com/person#gender_concept_id> ;
  drivetrain:object drivetrain:gender_concept_id_IntegerLiteralValue ;
.

drivetrain:PatientRidShortcut
  a drivetrain:DatatypeConnectionRecipe ;
  drivetrain:multiplicity drivetrain:1-1 ;
  drivetrain:subject <http://api.stardog.com/person> ;
  drivetrain:predicate <http://api.stardog.com/person#race_concept_id> ;
  drivetrain:object drivetrain:race_concept_id_IntegerLiteralValue ;
.

drivetrain:RidScoStarRid a drivetrain:objectConnectionToTermRecipe ;
   drivetrain:multiplicity drivetrain:1-1 ;
   drivetrain:object obo:OMRSE_00000098 ;
   drivetrain:predicate rdfs:subClassOf ;
   drivetrain:predicateSuffix drivetrain:star ;
   drivetrain:subject drivetrain:RidClassList ;
   drivetrain:referencedInGraph <https://raw.githubusercontent.com/PennTURBO/Turbo-Ontology/master/ontologies/turbo_merged.owl> ;
.

drivetrain:RidOmopConceptIds 
  a drivetrain:DatatypeConnectionRecipe ;
  drivetrain:referencedInGraph <https://raw.githubusercontent.com/PennTURBO/Turbo-Ontology/master/ontologies/turbo_merged.owl> ;
  drivetrain:multiplicity drivetrain:1-1 ;
  drivetrain:subject drivetrain:RidClassList ;
  drivetrain:predicate ontologies:TURBO_0010147 ;
  drivetrain:object drivetrain:race_concept_id_IntegerLiteralValue ;
.
drivetrain:PatientCridsymShortcut 
  a drivetrain:DatatypeConnectionRecipe ;
  drivetrain:multiplicity drivetrain:1-1 ;
  drivetrain:subject <http://api.stardog.com/person> ;
  drivetrain:predicate <http://api.stardog.com/person#person_source_value> ;
  drivetrain:object drivetrain:person_source_value_StringLiteralValue ;
.
drivetrain:PatientKeySymShortcut 
  a drivetrain:DatatypeConnectionRecipe ;
  drivetrain:multiplicity drivetrain:1-1 ;
  drivetrain:subject <http://api.stardog.com/person> ;
  drivetrain:predicate <http://api.stardog.com/person#person_id> ;
  drivetrain:object drivetrain:person_id_IntegerLiteralValue ;
.
drivetrain:PatientDobShortcut 
  a drivetrain:DatatypeConnectionRecipe ;
  drivetrain:multiplicity drivetrain:1-1 ;
  drivetrain:subject <http://api.stardog.com/person> ;
  drivetrain:predicate <http://api.stardog.com/person#birth_datetime> ;
  drivetrain:object drivetrain:birth_datetime_DateLiteralValue ;
.

### Encs
# _ is wildcard suffix for graph names
drivetrain:post_icbo_synthea_omop_cnp_encs
  a ontologies:TURBO_0010354 ;
  drivetrain:hasOutput drivetrain:CridDenotesEnc ;
  drivetrain:hasOutput drivetrain:EncExpansionSpecification ;
  drivetrain:hasOutput drivetrain:EncKeyDenotesTypingDbXrefProv ;
  drivetrain:hasOutput drivetrain:EncKeySymbHasRepresentation ;
  drivetrain:hasOutput drivetrain:EncKeySymbPartOfKey ;
  drivetrain:hasOutput drivetrain:EncStartDatePartOfColumn ;
  drivetrain:hasOutput drivetrain:EncTypeAxiomDbXrefHasRepresentation ;
  drivetrain:hasOutput drivetrain:EncTypeAxiomDbXrefPartOfColumn ;
  drivetrain:hasOutput drivetrain:EncTypeAxiomHasDbXref ;
  drivetrain:hasOutput drivetrain:EncTypeAxiomProp ;
  drivetrain:hasOutput drivetrain:EncTypeAxiomSource ;
  drivetrain:hasOutput drivetrain:EncTypeAxiomTarget ;
  drivetrain:hasOutput drivetrain:EncTypingRecipe ;
  drivetrain:hasOutput drivetrain:EndDatePartOfColumn ;
  drivetrain:hasOutput drivetrain:EndingTmdAboutProcbound ;
  drivetrain:hasOutput drivetrain:EndingTmdHasMeasVal ;
  drivetrain:hasOutput drivetrain:HardcodedEncSourceden ;
  drivetrain:hasOutput drivetrain:HardcodedRegden ;
  drivetrain:hasOutput drivetrain:KeyDenotesEnc ;
  drivetrain:hasOutput drivetrain:KeyDenotesEncStartDate ;
  drivetrain:hasOutput drivetrain:KeyDenotesEndDate ;
  drivetrain:hasOutput drivetrain:KeyDenotesVisitCridSym ;
  drivetrain:hasOutput drivetrain:ProcboundEndsEnc ;
  drivetrain:hasOutput drivetrain:ProcboundStartsEnc ;
  drivetrain:hasOutput drivetrain:StartingTmdAboutProcbound ;
  drivetrain:hasOutput drivetrain:EncStartingTmdHasMeasVal ;
  drivetrain:hasOutput drivetrain:VisitCridSymPartOfColumn ;
  drivetrain:hasOutput drivetrain:VisitIdPartOfColumn ;
  drivetrain:hasOutput drivetrain:encCridsymbHasRepresentation ;
  drivetrain:hasOutput drivetrain:symbolPartOfCridForEnc ;
  drivetrain:hasRequiredInput drivetrain:EncCridsymShortcut ;
  drivetrain:hasRequiredInput drivetrain:EncEnddateShortcut ;
  drivetrain:hasRequiredInput drivetrain:EncKeysymShortcut ;
  drivetrain:hasRequiredInput drivetrain:EncOmopConceptIds ;
  drivetrain:hasRequiredInput drivetrain:EncScoStarEnc ;
  drivetrain:hasRequiredInput drivetrain:EncStartdateShortcut ;
  drivetrain:hasRequiredInput drivetrain:EncTypeShortcut ;
  drivetrain:inputNamedGraph ontologies:omopShortcuts ;
  drivetrain:outputNamedGraph ontologies:omopExpanded ;
  drivetrain:precedes drivetrain:post_icbo_synthea_omop_cnp_enc_participation ;
.

drivetrain:EncTypeShortcut 
  a drivetrain:DatatypeConnectionRecipe ;
  drivetrain:multiplicity drivetrain:1-1 ;
  drivetrain:subject <http://api.stardog.com/visit_occurrence> ;
  drivetrain:predicate <http://api.stardog.com/visit_occurrence#visit_concept_id> ;
  drivetrain:object drivetrain:visit_concept_id_IntegerLiteralValue ;
.

drivetrain:EncScoStarEnc a drivetrain:objectConnectionToTermRecipe ;
   drivetrain:multiplicity drivetrain:1-1 ;
   drivetrain:object obo:OGMS_0000097 ;
   drivetrain:predicate rdfs:subClassOf ;
   drivetrain:predicateSuffix drivetrain:star ;
   drivetrain:subject drivetrain:EncClassList ;
   drivetrain:referencedInGraph <https://raw.githubusercontent.com/PennTURBO/Turbo-Ontology/master/ontologies/turbo_merged.owl> ;
.

drivetrain:EncOmopConceptIds 
  a drivetrain:DatatypeConnectionRecipe ;
  drivetrain:referencedInGraph <https://raw.githubusercontent.com/PennTURBO/Turbo-Ontology/master/ontologies/turbo_merged.owl> ;
  drivetrain:multiplicity drivetrain:1-1 ;
  drivetrain:subject drivetrain:EncClassList ;
  drivetrain:predicate ontologies:TURBO_0010147 ;
  drivetrain:object drivetrain:visit_concept_id_IntegerLiteralValue ;
.

drivetrain:EncPersonIdShortcut 
  a drivetrain:DatatypeConnectionRecipe ;
  drivetrain:multiplicity drivetrain:1-1 ;
  drivetrain:subject <http://api.stardog.com/visit_occurrence> ;
  drivetrain:predicate <http://api.stardog.com/visit_occurrence#person_id> ;
  drivetrain:object drivetrain:person_id_IntegerLiteralValue ;
.
drivetrain:EncCridsymShortcut 
  a drivetrain:DatatypeConnectionRecipe ;
  drivetrain:multiplicity drivetrain:1-1 ;
  drivetrain:subject <http://api.stardog.com/visit_occurrence> ;
  drivetrain:predicate <http://api.stardog.com/visit_occurrence#visit_source_value> ;
  drivetrain:object drivetrain:visit_source_value_StringLiteralValue ;
.
drivetrain:EncKeysymShortcut 
  a drivetrain:DatatypeConnectionRecipe ;
  drivetrain:multiplicity drivetrain:1-1 ;
  drivetrain:subject <http://api.stardog.com/visit_occurrence> ;
  drivetrain:predicate <http://api.stardog.com/visit_occurrence#visit_occurrence_id> ;
  drivetrain:object drivetrain:visit_occurrence_id_IntegerLiteralValue ;
.
drivetrain:EncEnddateShortcut 
  a drivetrain:DatatypeConnectionRecipe ;
  drivetrain:multiplicity drivetrain:1-1 ;
  drivetrain:object drivetrain:visit_end_datetime_DateLiteralValue ;
  drivetrain:predicate <http://api.stardog.com/visit_occurrence#visit_end_datetime> ;
  drivetrain:subject <http://api.stardog.com/visit_occurrence> ;
.
drivetrain:EncStartdateShortcut 
  a drivetrain:DatatypeConnectionRecipe ;
  drivetrain:multiplicity drivetrain:1-1 ;
  drivetrain:object drivetrain:visit_start_datetime_DateLiteralValue ;
  drivetrain:predicate <http://api.stardog.com/visit_occurrence#visit_start_datetime> ;
  drivetrain:subject <http://api.stardog.com/visit_occurrence> ;
.

### Enc participation

drivetrain:post_icbo_synthea_omop_cnp_enc_participation  
  a ontologies:TURBO_0010354 ;
  drivetrain:hasOutput drivetrain:EncParticipationAxiomDbXrefHasRepresentation ;
  drivetrain:hasOutput drivetrain:EncParticipationAxiomDbXrefPartOfColumn ;
  drivetrain:hasOutput drivetrain:EncParticipationAxiomHasDbXref ;
  drivetrain:hasOutput drivetrain:EncParticipationAxiomProp ;
  drivetrain:hasOutput drivetrain:EncParticipationAxiomSource ;
  drivetrain:hasOutput drivetrain:EncParticipationAxiomTarget ;
  drivetrain:hasOutput drivetrain:EncRealizesRole ;
  drivetrain:hasOutput drivetrain:HceKeyDenotesProv4Participation ;
  drivetrain:hasRequiredInput drivetrain:EncExpansionSpecification ;
  drivetrain:hasRequiredInput drivetrain:EncKeyDenotesEnc ;
  drivetrain:hasRequiredInput drivetrain:EncOmopConceptIds ;
  drivetrain:hasRequiredInput drivetrain:EncPatientID ;
  drivetrain:hasRequiredInput drivetrain:EncPersonIdShortcut ;
  drivetrain:hasRequiredInput drivetrain:EncTypeShortcut ;
  drivetrain:hasRequiredInput drivetrain:EncTypingRecipe ;
  drivetrain:hasRequiredInput drivetrain:HardcodedPatientSourceden ;
  drivetrain:hasRequiredInput drivetrain:KeyDenotesPatient ;
  drivetrain:hasRequiredInput drivetrain:PatKeySymbHasRepresentation ;
  drivetrain:hasRequiredInput drivetrain:PatKeySymbPartOfKey ;
  drivetrain:hasRequiredInput drivetrain:PatientHasRole;
  drivetrain:inputNamedGraph ontologies:omopShortcuts ;
  drivetrain:outputNamedGraph ontologies:omopExpanded ;
  drivetrain:precedes drivetrain:post_icbo_synthea_omop_cnp_precedence ;
.

drivetrain:EncKeyDenotesEnc
  a drivetrain:objectConnectionToInstanceRecipe ;
  drivetrain:referencedInGraph ontologies:omopExpanded ;
  drivetrain:multiplicity drivetrain:1-1 ;
  drivetrain:subject ontologies:TURBO_0010433 ;
  drivetrain:predicate obo:IAO_0000219 ;
  drivetrain:object drivetrain:EncToBeTyped ;
  drivetrain:subjectUsesContext drivetrain:EncKeyContext ;
.

drivetrain:EncPatientID 
  a drivetrain:DatatypeConnectionRecipe ;
  drivetrain:referencedInGraph ontologies:omopShortcuts ;
  drivetrain:multiplicity drivetrain:1-1 ;
  drivetrain:subject <http://api.stardog.com/visit_occurrence> ;
  drivetrain:predicate <http://api.stardog.com/visit_occurrence#person_id> ;
  drivetrain:object drivetrain:person_id_IntegerLiteralValue ;
.

### Enc precedence

drivetrain:post_icbo_synthea_omop_cnp_precedence
  a ontologies:TURBO_0010354 ;
  drivetrain:hasOutput drivetrain:HceKeyDenotesProv4Precedence ;
  drivetrain:hasOutput drivetrain:PrecedenceAxiomDbXrefHasRepresentation ;
  drivetrain:hasOutput drivetrain:PrecedenceAxiomDbXrefPartOfColumn ;
  drivetrain:hasOutput drivetrain:PrecedenceAxiomHasDbXref ;
  drivetrain:hasOutput drivetrain:PrecedenceAxiomProp ;
  drivetrain:hasOutput drivetrain:PrecedenceAxiomSource ;
  drivetrain:hasOutput drivetrain:PrecedenceAxiomTarget ;
  drivetrain:hasOutput drivetrain:PrevencPrecedesEnc ;
  drivetrain:hasRequiredInput drivetrain:EncExpansionSpecification ;
  drivetrain:hasRequiredInput drivetrain:EncKeyDenotesEnc ;
  drivetrain:hasRequiredInput drivetrain:EncOmopConceptIds ;
  drivetrain:hasRequiredInput drivetrain:EncPreviousEncValSc ;
  drivetrain:hasRequiredInput drivetrain:EncTypeShortcut ;
  drivetrain:hasRequiredInput drivetrain:EncTypingRecipe ;
  drivetrain:hasRequiredInput drivetrain:KeyContainerOfPreviousVisitId ;
  drivetrain:hasRequiredInput drivetrain:KeyDenotesPrevenc ;
  drivetrain:hasRequiredInput drivetrain:PrevencAPrevencsClass ; 
  drivetrain:hasRequiredInput drivetrain:PrevencScoEnc ; 
  drivetrain:hasRequiredInput drivetrain:RepresenteeOfPreviousVisitId ;
  drivetrain:inputNamedGraph ontologies:omopShortcuts ;
  drivetrain:outputNamedGraph ontologies:omopExpanded ;
  drivetrain:precedes drivetrain:post_icbo_synthea_omop_cnp_procedures ;
.

drivetrain:EncPreviousEncValSc
  a drivetrain:DatatypeConnectionRecipe ;
  drivetrain:referencedInGraph ontologies:omopShortcuts ;
  drivetrain:multiplicity drivetrain:1-1 ;
  drivetrain:subject <http://api.stardog.com/visit_occurrence> ;
  drivetrain:predicate <http://api.stardog.com/visit_occurrence#preceding_visit_occurrence_id> ;
  drivetrain:object drivetrain:preceding_visit_occurrence_id_IntegerLiteralValue ;
.

drivetrain:RepresenteeOfPreviousVisitId
  a drivetrain:DatatypeConnectionRecipe ;
  drivetrain:referencedInGraph ontologies:omopExpanded ;
  drivetrain:multiplicity drivetrain:1-1 ;
  drivetrain:subject obo:IAO_0000028 ;
  drivetrain:predicate ontologies:TURBO_0010094 ;
  drivetrain:object drivetrain:preceding_visit_occurrence_id_IntegerLiteralValue ;
.

drivetrain:KeyContainerOfPreviousVisitId
  a drivetrain:objectConnectionToInstanceRecipe ;
  drivetrain:referencedInGraph ontologies:omopExpanded ;
  drivetrain:multiplicity drivetrain:1-1 ;
  drivetrain:subject obo:IAO_0000028 ;
  drivetrain:predicate obo:BFO_0000050 ;
  drivetrain:object ontologies:TURBO_0010433 ;
.

drivetrain:KeyDenotesPrevenc
  a drivetrain:objectConnectionToInstanceRecipe ;
  drivetrain:referencedInGraph ontologies:omopExpanded ;
  drivetrain:multiplicity drivetrain:1-1 ;
  drivetrain:subject ontologies:TURBO_0010433 ;
  drivetrain:predicate obo:IAO_0000219 ;
  drivetrain:object drivetrain:Prevenc ;
.

drivetrain:PrevencAPrevencsClass 
  a drivetrain:objectConnectionToInstanceRecipe ;
  drivetrain:referencedInGraph ontologies:omopExpanded ;
  drivetrain:multiplicity drivetrain:1-1 ;
  drivetrain:subject drivetrain:Prevenc ;
  drivetrain:predicate rdf:type ;
  drivetrain:object drivetrain:PrevencsClass ;
.

drivetrain:PrevencScoEnc
  a drivetrain:objectConnectionToTermRecipe ;
  drivetrain:referencedInGraph <https://raw.githubusercontent.com/PennTURBO/Turbo-Ontology/master/ontologies/turbo_merged.owl> ;
  drivetrain:multiplicity drivetrain:1-1 ;
  drivetrain:subject drivetrain:PrevencsClass ;
  drivetrain:predicate rdfs:subClassOf ;
  drivetrain:object obo:OGMS_0000097 ;
.

### Procs

drivetrain:post_icbo_synthea_omop_cnp_procedures
  # drivetrain:hasOutput drivetrain:KeyDenotesProcStartDate ;
  a ontologies:TURBO_0010354 ;
  drivetrain:hasOutput drivetrain:HardcodedProcSourceden ;
  drivetrain:hasOutput drivetrain:MentioningProvAboutProc ;
  drivetrain:hasOutput drivetrain:MentioningProvHasRepresentation ;
  drivetrain:hasOutput drivetrain:MentioningProvMentionsSnomed ;
  drivetrain:hasOutput drivetrain:MentioningProvPartOfCol ;
  drivetrain:hasOutput drivetrain:ProcExpansionSpecification ;
  drivetrain:hasOutput drivetrain:ProcKeyDenotesMentioningProv ;
  drivetrain:hasOutput drivetrain:ProcKeyDenotesProc ;
  drivetrain:hasOutput drivetrain:ProcKeyDenotesProcTypeAxiomDbXref ;  
  drivetrain:hasOutput drivetrain:ProcKeyDenotesTmd ;
  drivetrain:hasOutput drivetrain:ProcKeySymbHasRepresentation ;
  drivetrain:hasOutput drivetrain:ProcKeySymbPartOfCol ;
  drivetrain:hasOutput drivetrain:ProcKeySymbPartOfKey ;
  drivetrain:hasOutput drivetrain:ProcStartDatePartOfColumn ;
  drivetrain:hasOutput drivetrain:ProcStartingTmdHasMeasVal ;
  drivetrain:hasOutput drivetrain:ProcTypeAxiomDbXrefHasRepresentation ;
  drivetrain:hasOutput drivetrain:ProcTypeAxiomDbXrefPartOfColumn ;
  drivetrain:hasOutput drivetrain:ProcTypeAxiomHasDbXref ;
  drivetrain:hasOutput drivetrain:ProcTypeAxiomProp ;
  drivetrain:hasOutput drivetrain:ProcTypeAxiomSource ;
  drivetrain:hasOutput drivetrain:ProcTypeAxiomTarget ;
  drivetrain:hasOutput drivetrain:ProcTypingRecipe ;
  drivetrain:hasOutput drivetrain:ProcboundStartsProc ;
  drivetrain:hasOutput drivetrain:StartingTmdAboutProcbound ;
  drivetrain:hasRequiredInput drivetrain:ProcDatetimeShortcut ;
  drivetrain:hasRequiredInput drivetrain:ProcKeysymShortcut ;
  drivetrain:hasRequiredInput drivetrain:ProcOmopConceptIds ;  
  drivetrain:hasRequiredInput drivetrain:ProcSciShortcut ;  
  drivetrain:hasRequiredInput drivetrain:ProcSourceValueShortcut ;
  drivetrain:inputNamedGraph ontologies:omopShortcuts ;
  drivetrain:outputNamedGraph ontologies:omopExpanded ;
  drivetrain:precedes drivetrain:post_icbo_synthea_omop_cnp_procedure_participation ;
.

drivetrain:ProcDatetimeShortcut 
  a drivetrain:DatatypeConnectionRecipe ;
  drivetrain:multiplicity drivetrain:1-1 ;
  drivetrain:subject <http://api.stardog.com/procedure_occurrence> ;
  drivetrain:predicate <http://api.stardog.com/procedure_occurrence#procedure_datetime> ;
  drivetrain:object drivetrain:procedure_datetime_DateLiteralValue ;
.

drivetrain:ProcSciShortcut 
  a drivetrain:DatatypeConnectionRecipe ;
  drivetrain:multiplicity drivetrain:1-1 ;
  drivetrain:subject <http://api.stardog.com/procedure_occurrence> ;
  drivetrain:predicate <http://api.stardog.com/procedure_occurrence#procedure_source_concept_id> ;
  drivetrain:object drivetrain:procedure_source_concept_id_IntegerLiteralValue ;
.

drivetrain:ProcOmopConceptIds 
  a drivetrain:DatatypeConnectionRecipe ;
  drivetrain:referencedInGraph <https://raw.githubusercontent.com/PennTURBO/Turbo-Ontology/master/ontologies/turbo_merged.owl> ;
  drivetrain:multiplicity drivetrain:1-1 ;
  drivetrain:subject drivetrain:ProcClassList ;
  drivetrain:predicate ontologies:TURBO_0010147 ;
  drivetrain:object drivetrain:procedure_source_concept_id_IntegerLiteralValue ;
.

ontologies:ProcKeysymShortcut 
  a drivetrain:DatatypeConnectionRecipe ;
  drivetrain:multiplicity drivetrain:1-1 ;
  drivetrain:subject <http://api.stardog.com/procedure_occurrence> ;
  drivetrain:predicate <http://api.stardog.com/procedure_occurrence#procedure_occurrence_id> ;
  drivetrain:object ontologies:procedure_occurrence_id_IntegerLiteralValue ;
.
ontologies:ProcSourceValueShortcut 
  a drivetrain:DatatypeConnectionRecipe ;
  drivetrain:multiplicity drivetrain:1-1 ;
  drivetrain:subject <http://api.stardog.com/procedure_occurrence> ;
  drivetrain:predicate <http://api.stardog.com/procedure_occurrence#procedure_source_value> ;
  drivetrain:object ontologies:procedure_source_value_StringLiteralValue ;
  drivetrain:objectRequiredToCreate ontologies:ProcMentionedClassList ;
.

ontologies:ProcMentionedClassFromValueRule
  a ontologies:TurboGraphVariableManipulationLogic ;
  ontologies:usesSparql """
  BIND(uri(concat('http://purl.bioontology.org/ontology/SNOMEDCT/', ${dependent} )) as  ${replacement} )
"""  ;
.
ontologies:ProcMentionedClassList 
  ontologies:usesCustomVariableManipulationRule ontologies:ProcMentionedClassFromValueRule .
  
### Proc participation

ontologies:post_icbo_synthea_omop_cnp_procedure_participation
  a ontologies:TURBO_0010354 ;
  drivetrain:hasOutput drivetrain:PatientHasRole ;
  drivetrain:hasOutput drivetrain:ProcKeyDenotesParticipationAxiomDbXref ;
  drivetrain:hasOutput drivetrain:ProcParticipationAxiomDbXrefHasRepresentation ;
  drivetrain:hasOutput drivetrain:ProcParticipationAxiomDbXrefPartOfColumn ;
  drivetrain:hasOutput drivetrain:ProcParticipationAxiomHasDbXref ;
  drivetrain:hasOutput drivetrain:ProcParticipationAxiomProp ;
  drivetrain:hasOutput drivetrain:ProcParticipationAxiomSource ;
  drivetrain:hasOutput drivetrain:ProcParticipationAxiomTarget ;
  drivetrain:hasOutput drivetrain:ProcRealizesPatientRole ;
  drivetrain:hasRequiredInput drivetrain:HardcodedPatientSourceden ;
  drivetrain:hasRequiredInput drivetrain:KeyDenotesPatient ;
  drivetrain:hasRequiredInput drivetrain:PatKeySymbHasRepresentation ;
  drivetrain:hasRequiredInput drivetrain:PatKeySymbPartOfKey ;
  drivetrain:hasRequiredInput drivetrain:PatientExpansionSpecification ;
  drivetrain:hasRequiredInput drivetrain:PatientHasRole ;
  drivetrain:hasRequiredInput drivetrain:ProcExpansionSpecification ;
  drivetrain:hasRequiredInput drivetrain:ProcKeyDenotesProc ;
  drivetrain:hasRequiredInput drivetrain:ProcPatientShortcut ;
  drivetrain:hasRequiredInput drivetrain:ProcTypingRecipe ;
  drivetrain:inputNamedGraph ontologies:omopShortcuts ;
  drivetrain:outputNamedGraph ontologies:omopExpanded ;
  drivetrain:precedes drivetrain:post_icbo_synthea_omop_cnp_procedure_parthood ;
.

drivetrain:ProcPatientShortcut 
  a drivetrain:DatatypeConnectionRecipe ;
  drivetrain:multiplicity drivetrain:1-1 ;
  drivetrain:subject <http://api.stardog.com/procedure_occurrence> ;
  drivetrain:predicate <http://api.stardog.com/procedure_occurrence#person_id> ;
  drivetrain:object drivetrain:person_id_IntegerLiteralValue ;
.

### Proc parthood
drivetrain:post_icbo_synthea_omop_cnp_procedure_parthood
  a ontologies:TURBO_0010354 ;
  drivetrain:hasOutput drivetrain:ProcKeyDenotesParthoodAxiomDbXref ;
  drivetrain:hasOutput drivetrain:ProcPartOfEnc ;
  drivetrain:hasOutput drivetrain:ProcParthoodAxiomDbXrefHasRepresentation ;
  drivetrain:hasOutput drivetrain:ProcParthoodAxiomDbXrefPartOfColumn ;
  drivetrain:hasOutput drivetrain:ProcParthoodAxiomHasDbXref ;
  drivetrain:hasOutput drivetrain:ProcParthoodAxiomProp ;
  drivetrain:hasOutput drivetrain:ProcParthoodAxiomSource ;
  drivetrain:hasOutput drivetrain:ProcParthoodAxiomTarget ;
  drivetrain:hasRequiredInput drivetrain:EncExpansionSpecification ;
  drivetrain:hasRequiredInput drivetrain:EncKeySymbHasRepresentation ;
  drivetrain:hasRequiredInput drivetrain:EncKeySymbPartOfKey ;
  drivetrain:hasRequiredInput drivetrain:EncTypingRecipe ;
  drivetrain:hasRequiredInput drivetrain:HardcodedEncSourceden ;
  drivetrain:hasRequiredInput drivetrain:KeyDenotesEnc ;
  drivetrain:hasRequiredInput drivetrain:ProcEncShortcut ;
  drivetrain:hasRequiredInput drivetrain:ProcExpansionSpecification ;
  drivetrain:hasRequiredInput drivetrain:ProcKeyDenotesProc ;
  drivetrain:hasRequiredInput drivetrain:ProcTypingRecipe ;
  drivetrain:inputNamedGraph ontologies:omopShortcuts ;
  drivetrain:outputNamedGraph ontologies:omopExpanded ;
  drivetrain:precedes drivetrain:post_icbo_synthea_omop_cnp_measurement ;
.

drivetrain:ProcEncShortcut 
  a drivetrain:DatatypeConnectionRecipe ;
  drivetrain:multiplicity drivetrain:1-1 ;
  drivetrain:subject <http://api.stardog.com/procedure_occurrence> ;
  drivetrain:predicate <http://api.stardog.com/procedure_occurrence#visit_occurrence_id> ;
  drivetrain:object drivetrain:visit_occurrence_id_IntegerLiteralValue ;
.
### measurement

drivetrain:post_icbo_synthea_omop_cnp_measurement
  a ontologies:TURBO_0010354 ;
  drivetrain:hasOutput drivetrain:HardcodedMeasSourceden ;
  drivetrain:hasOutput drivetrain:KeyDenotesMeas ;
  drivetrain:hasOutput drivetrain:KeyDenotesTmd ;
  drivetrain:hasOutput drivetrain:KeyDenotesValspec ;
  drivetrain:hasOutput drivetrain:MeasExpansionSpecification ;
  drivetrain:hasOutput drivetrain:MeasHasTimestamp ;
  drivetrain:hasOutput drivetrain:MeasHasValspec ;
  drivetrain:hasOutput drivetrain:MeasKeyDenotesProv4MeasType ;
  drivetrain:hasOutput drivetrain:MeasKeyDenotesProv4Mention ;
  drivetrain:hasOutput drivetrain:MeasKeySymbHasRepresentation ;
  drivetrain:hasOutput drivetrain:MeasKeySymbPartOfColumn ;
  drivetrain:hasOutput drivetrain:MeasKeySymbPartOfKey ;
  drivetrain:hasOutput drivetrain:MeasMentionAxiomDbXrefHasRepresentation ;
  drivetrain:hasOutput drivetrain:MeasMentionAxiomDbXrefPartOfColumn ;
  drivetrain:hasOutput drivetrain:MeasMentionAxiomHasDbXref ;
  drivetrain:hasOutput drivetrain:MeasMentionAxiomProp ;
  drivetrain:hasOutput drivetrain:MeasMentionAxiomSource ;
  drivetrain:hasOutput drivetrain:MeasMentionAxiomTarget ;
  drivetrain:hasOutput drivetrain:MeasMentionsCode ;
  drivetrain:hasOutput drivetrain:MeasTmdHasMeasVal ;
  drivetrain:hasOutput drivetrain:MeasTmdPartOfQueryResult ;
  drivetrain:hasOutput drivetrain:MeasTypeAxiomDbXrefHasRepresentation ;
  drivetrain:hasOutput drivetrain:MeasTypeAxiomDbXrefPartOfColumn ;
  drivetrain:hasOutput drivetrain:MeasTypeAxiomHasDbXref ;
  drivetrain:hasOutput drivetrain:MeasTypeAxiomProp ;
  drivetrain:hasOutput drivetrain:MeasTypeAxiomSource ;
  drivetrain:hasOutput drivetrain:MeasTypeAxiomTarget ;
  drivetrain:hasOutput drivetrain:MeasTypingRecipe ;
  drivetrain:hasOutput drivetrain:MeasValspecPartOfQueryResult ;
  drivetrain:hasOutput drivetrain:ValspecHasSpecVal ;
  drivetrain:hasRequiredInput drivetrain:MeasClassHasOmopConceptId ;
  drivetrain:hasRequiredInput drivetrain:MeasCodeShortcut ;
  drivetrain:hasRequiredInput drivetrain:MeasConceptShortcut ;
  drivetrain:hasRequiredInput drivetrain:MeasDatetimeShortcut ;
  drivetrain:hasRequiredInput drivetrain:MeasKeysymShortcut ;
  drivetrain:hasRequiredInput drivetrain:MeasNumValShortcut ;
  drivetrain:hasRequiredInput drivetrain:MeasScoMeas ;
  drivetrain:hasRequiredInput drivetrain:MeasVocabShortcut ;
  drivetrain:inputNamedGraph ontologies:omopShortcuts ;
  drivetrain:outputNamedGraph ontologies:omopExpanded ;
  drivetrain:precedes drivetrain:post_icbo_synthea_omop_cnp_mul ;
.

drivetrain:MeasScoMeas
  a drivetrain:objectConnectionToTermRecipe ;
  drivetrain:multiplicity drivetrain:1-1 ;
  drivetrain:object obo:IAO_0000109 ;
  drivetrain:predicate rdfs:subClassOf  ;
  drivetrain:predicateSuffix drivetrain:star ;
  drivetrain:referencedInGraph <https://raw.githubusercontent.com/PennTURBO/Turbo-Ontology/master/ontologies/turbo_merged.owl> ;
  drivetrain:subject drivetrain:MeasClassList ;
.

drivetrain:MeasClassHasOmopConceptId 
  a drivetrain:DatatypeConnectionRecipe ;
  drivetrain:multiplicity drivetrain:1-1 ;
  drivetrain:object drivetrain:measurement_source_concept_id_IntegerLiteralValue ;
  drivetrain:predicate ontologies:TURBO_0010147  ;
  drivetrain:referencedInGraph <https://raw.githubusercontent.com/PennTURBO/Turbo-Ontology/master/ontologies/turbo_merged.owl> ;
  drivetrain:subject drivetrain:MeasClassList ;
.

drivetrain:MeasConceptShortcut 
  a drivetrain:DatatypeConnectionRecipe ;
  drivetrain:multiplicity drivetrain:1-1 ;
  drivetrain:object drivetrain:measurement_source_concept_id_IntegerLiteralValue ;
  drivetrain:predicate <http://api.stardog.com/measurement#measurement_source_concept_id> ;
  drivetrain:subject <http://api.stardog.com/measurement> ;
.

drivetrain:MeasCodeShortcut 
  a drivetrain:DatatypeConnectionRecipe ;
  drivetrain:multiplicity drivetrain:1-1 ;
  drivetrain:object drivetrain:measurement_source_value_StringLiteralValue ;
  drivetrain:objectRequiredToCreate drivetrain:MeasCodeMentionedClassList ;
  drivetrain:predicate <http://api.stardog.com/measurement#measurement_source_value> ;
  drivetrain:subject <http://api.stardog.com/measurement> ;
.

drivetrain:MeasVocabShortcut 
  a drivetrain:DatatypeConnectionRecipe ;
  drivetrain:multiplicity drivetrain:1-1 ;
  drivetrain:object drivetrain:measurement_vocabulary_id_StringLiteralValue ;
  drivetrain:predicate <http://api.stardog.com/measurement#vocabulary_id> ;
  drivetrain:subject <http://api.stardog.com/measurement> ;
.

# # TWO DEPENDENTS? "LOINC" OR "SNOMED", PLUS VALUE
drivetrain:MeasCodeMentionedClassListFromValueRule
  a drivetrain:TurboGraphVariableManipulationLogic ;
  drivetrain:usesSparql """
  BIND(uri(concat('http://purl.bioontology.org/ontology/', ?measurement_vocabulary_id_StringLiteralValue , '/', ${dependent} )) as  ${replacement} )
"""  ;
.

drivetrain:MeasCodeMentionedClassList 
  drivetrain:usesCustomVariableManipulationRule drivetrain:MeasCodeMentionedClassListFromValueRule .
  

drivetrain:MeasNumValShortcut 
  a drivetrain:DatatypeConnectionRecipe ;
  drivetrain:multiplicity drivetrain:1-1 ;
  drivetrain:subject <http://api.stardog.com/measurement> ;
  drivetrain:predicate <http://api.stardog.com/measurement#value_as_number> ;
  drivetrain:object drivetrain:value_as_number_IntegerLiteralValue ;
.
drivetrain:MeasKeysymShortcut 
  a drivetrain:DatatypeConnectionRecipe ;
  drivetrain:multiplicity drivetrain:1-1 ;
  drivetrain:subject <http://api.stardog.com/measurement> ;
  drivetrain:predicate <http://api.stardog.com/measurement#measurement_id> ;
  drivetrain:object drivetrain:measurement_id_IntegerLiteralValue ;
.
drivetrain:MeasDatetimeShortcut 
  a drivetrain:DatatypeConnectionRecipe ;
  drivetrain:multiplicity drivetrain:1-1 ;
  drivetrain:subject <http://api.stardog.com/measurement> ;
  drivetrain:predicate <http://api.stardog.com/measurement#measurement_datetime> ;
  drivetrain:object drivetrain:measurement_datetime_DateLiteralValue ;
.

### Measurement unit label

drivetrain:post_icbo_synthea_omop_cnp_mul
  a ontologies:TURBO_0010354 ;
  drivetrain:hasOutput drivetrain:MeasHasMul ;
  drivetrain:hasOutput drivetrain:MeasKeyDenotesProv4Mul ;
  drivetrain:hasOutput drivetrain:MulAxiomDbXrefHasRepresentation ;
  drivetrain:hasOutput drivetrain:MulAxiomDbXrefPartOfColumn ;
  drivetrain:hasOutput drivetrain:MulAxiomHasDbXref ;
  drivetrain:hasOutput drivetrain:MulAxiomProp ;
  drivetrain:hasOutput drivetrain:MulAxiomSource ;
  drivetrain:hasOutput drivetrain:MulAxiomTarget ;
  drivetrain:hasRequiredInput drivetrain:KeyDenotesMeasInp ;
  drivetrain:hasRequiredInput drivetrain:MeasExpansionSpecification ;
  drivetrain:hasRequiredInput drivetrain:MeasMoreUnitsShortcut ;
  drivetrain:hasRequiredInput drivetrain:MeasTypingRecipe ;
  drivetrain:hasRequiredInput drivetrain:MulClassHasOmopConceptId ;
  drivetrain:hasRequiredInput drivetrain:MulScoMul ;
  drivetrain:inputNamedGraph ontologies:omopShortcuts ;
  drivetrain:outputNamedGraph ontologies:omopExpanded ;
  drivetrain:precedes drivetrain:post_icbo_synthea_omop_cnp_measurement_aboutness ;
.
drivetrain:MeasMoreUnitsShortcut 
  a drivetrain:DatatypeConnectionRecipe ;
  drivetrain:multiplicity drivetrain:1-1 ;
  drivetrain:subject <http://api.stardog.com/measurement> ;
  drivetrain:predicate <http://api.stardog.com/measurement#more_units> ;
  drivetrain:object drivetrain:measurement_more_units_IntegerLiteralValue ;
.

drivetrain:MulClassHasOmopConceptId 
  a drivetrain:DatatypeConnectionRecipe ;
  drivetrain:referencedInGraph <https://raw.githubusercontent.com/PennTURBO/Turbo-Ontology/master/ontologies/turbo_merged.owl> ;
  drivetrain:multiplicity drivetrain:1-1 ;
  drivetrain:subject drivetrain:MulClassList ;
  drivetrain:predicate ontologies:TURBO_0010147  ;
  drivetrain:object drivetrain:measurement_more_units_IntegerLiteralValue ;
.

drivetrain:MulScoMul
  a drivetrain:objectConnectionToTermRecipe ;
  drivetrain:multiplicity drivetrain:1-1 ;
  drivetrain:object obo:IAO_0000003 ;
  drivetrain:predicate rdfs:subClassOf  ;
  drivetrain:predicateSuffix drivetrain:star ;
  drivetrain:referencedInGraph <https://raw.githubusercontent.com/PennTURBO/Turbo-Ontology/master/ontologies/turbo_merged.owl> ;
  drivetrain:subject drivetrain:MulClassList ;
.

### measurement aboutness

drivetrain:post_icbo_synthea_omop_cnp_measurement_aboutness 
  a ontologies:TURBO_0010354 ;
  drivetrain:hasOutput drivetrain:MeasAboutPat ;
  drivetrain:hasOutput drivetrain:MeasAboutnessAxiomDbXrefHasRepresentation ;
  drivetrain:hasOutput drivetrain:MeasAboutnessAxiomDbXrefPartOfColumn ;
  drivetrain:hasOutput drivetrain:MeasAboutnessAxiomHasDbXref ;
  drivetrain:hasOutput drivetrain:MeasAboutnessAxiomProp ;
  drivetrain:hasOutput drivetrain:MeasAboutnessAxiomSource ;
  drivetrain:hasOutput drivetrain:MeasAboutnessAxiomTarget ;
  drivetrain:hasOutput drivetrain:MeasKeyDenotesProv4Aboutness ; 
  drivetrain:hasRequiredInput drivetrain:HardcodedPatientSourceden ;
  drivetrain:hasRequiredInput drivetrain:KeyDenotesMeasInp ;
  drivetrain:hasRequiredInput drivetrain:KeyDenotesPatient ;
  drivetrain:hasRequiredInput drivetrain:MeasExpansionSpecification ;
  drivetrain:hasRequiredInput drivetrain:MeasPatientShortcut ;
  drivetrain:hasRequiredInput drivetrain:MeasTypingRecipe ;
  drivetrain:hasRequiredInput drivetrain:PatKeySymbHasRepresentation ;
  drivetrain:hasRequiredInput drivetrain:PatKeySymbPartOfKey ;
  drivetrain:hasRequiredInput drivetrain:PatientExpansionSpecification ;
  drivetrain:inputNamedGraph ontologies:omopShortcuts ;
  drivetrain:outputNamedGraph ontologies:omopExpanded ;
  drivetrain:precedes drivetrain:post_icbo_synthea_omop_cnp_measurement_parthood ;
.

drivetrain:MeasPatientShortcut 
  a drivetrain:DatatypeConnectionRecipe ;
  drivetrain:multiplicity drivetrain:1-1 ;
  drivetrain:subject <http://api.stardog.com/measurement> ;
  drivetrain:predicate <http://api.stardog.com/measurement#person_id> ;
  drivetrain:object drivetrain:person_id_IntegerLiteralValue ;
.

### measurement parthood

drivetrain:post_icbo_synthea_omop_cnp_measurement_parthood
  a ontologies:TURBO_0010354 ;
  drivetrain:hasOutput drivetrain:EncHsoMeas ;
  drivetrain:hasOutput drivetrain:MeasKeyDenotesProv4Parthood ; 
  drivetrain:hasOutput drivetrain:MeasParthoodAxiomDbXrefHasRepresentation ;
  drivetrain:hasOutput drivetrain:MeasParthoodAxiomDbXrefPartOfColumn ;
  drivetrain:hasOutput drivetrain:MeasParthoodAxiomHasDbXref ;
  drivetrain:hasOutput drivetrain:MeasParthoodAxiomProp ;
  drivetrain:hasOutput drivetrain:MeasParthoodAxiomSource ;
  drivetrain:hasOutput drivetrain:MeasParthoodAxiomTarget ;
  drivetrain:hasRequiredInput drivetrain:EncExpansionSpecification ;
  drivetrain:hasRequiredInput drivetrain:EncKeySymbHasRepresentation ;
  drivetrain:hasRequiredInput drivetrain:EncKeySymbPartOfKey ;
  drivetrain:hasRequiredInput drivetrain:EncTypingRecipe ;
  drivetrain:hasRequiredInput drivetrain:HardcodedEncSourceden ;
  drivetrain:hasRequiredInput drivetrain:KeyDenotesEnc ;
  drivetrain:hasRequiredInput drivetrain:KeyDenotesMeasInp ;
  drivetrain:hasRequiredInput drivetrain:MeasEncShortcut ;
  drivetrain:hasRequiredInput drivetrain:MeasExpansionSpecification ;
  drivetrain:hasRequiredInput drivetrain:MeasTypingRecipe ;
  drivetrain:inputNamedGraph ontologies:omopShortcuts ;
  drivetrain:outputNamedGraph ontologies:omopExpanded ;
  drivetrain:precedes drivetrain:post_icbo_synthea_omop_cnp_condition_occurrence ;
.

drivetrain:MeasEncShortcut 
  a drivetrain:DatatypeConnectionRecipe ;
  drivetrain:multiplicity drivetrain:1-1 ;
  drivetrain:subject <http://api.stardog.com/measurement> ;
  drivetrain:predicate <http://api.stardog.com/measurement#visit_occurrence_id> ;
  drivetrain:object drivetrain:visit_occurrence_id_IntegerLiteralValue ;
.

drivetrain:KeyDenotesMeasInp
  a drivetrain:objectConnectionToInstanceRecipe ;
  drivetrain:multiplicity drivetrain:1-1 ;
  drivetrain:object drivetrain:MeasToBeTyped ;
  drivetrain:predicate obo:IAO_0000219 ;
  drivetrain:referencedInGraph ontologies:omopExpanded ;
  drivetrain:subject ontologies:TURBO_0010433 ;
  drivetrain:subjectUsesContext drivetrain:MeasDenotationContext ;
.

### conditions/diagnoses (?)

drivetrain:post_icbo_synthea_omop_cnp_condition_occurrence
  a ontologies:TURBO_0010354 ;
  drivetrain:hasOutput drivetrain:DiagHasTimestamp ;
  drivetrain:hasOutput drivetrain:DiagTmdHasMeasVal ;
  drivetrain:hasOutput drivetrain:DiagExpansion;
  drivetrain:hasOutput drivetrain:DiagHasRepresentation ;
  drivetrain:hasOutput drivetrain:DiagKeyDenotesProv4Mention ;
  drivetrain:hasOutput drivetrain:DiagKeySymbHasRepresentation ;
  drivetrain:hasOutput drivetrain:DiagKeySymbPartOfColumn ;
  drivetrain:hasOutput drivetrain:DiagKeySymbPartOfKey ;
  drivetrain:hasOutput drivetrain:DiagMentionAxiomDbXrefHasRepresentation ;
  drivetrain:hasOutput drivetrain:DiagMentionAxiomDbXrefPartOfColumn ;
  drivetrain:hasOutput drivetrain:DiagMentionAxiomHasDbXref ;
  drivetrain:hasOutput drivetrain:DiagMentionAxiomProp ;
  drivetrain:hasOutput drivetrain:DiagMentionAxiomSource ;
  drivetrain:hasOutput drivetrain:DiagMentionAxiomTarget ;
  drivetrain:hasOutput drivetrain:DiagMentionsSnomed ;
  drivetrain:hasOutput drivetrain:DiagPartOfColumn ;
  drivetrain:hasOutput drivetrain:DiagTmdPartOfColumn ;
  drivetrain:hasOutput drivetrain:HardcodedDiagSourceden ;
  drivetrain:hasOutput drivetrain:KeyDenotesDiag ;
  drivetrain:hasOutput drivetrain:KeyDenotesDiagTmd ;
  drivetrain:hasRequiredInput drivetrain:CondCodeShortcut ;
  drivetrain:hasRequiredInput drivetrain:CondEncounterShortcut ;
  drivetrain:hasRequiredInput drivetrain:CondKeysymShortcut ;
  drivetrain:hasRequiredInput drivetrain:CondStartDatetimeShortcut ;
  drivetrain:inputNamedGraph ontologies:omopShortcuts ;
  drivetrain:outputNamedGraph ontologies:omopExpanded ;
  drivetrain:precedes drivetrain:post_icbo_synthea_omop_cnp_diagnosis_aboutness ;
.
drivetrain:CondCodeShortcut 
  a drivetrain:DatatypeConnectionRecipe ;
  drivetrain:multiplicity drivetrain:1-1 ;
  drivetrain:object drivetrain:condition_source_value_StringLiteralValue ;
  drivetrain:objectRequiredToCreate drivetrain:CondMentionedClassList ;
  drivetrain:predicate <http://api.stardog.com/condition_occurrence#condition_source_value> ;
  drivetrain:subject <http://api.stardog.com/condition_occurrence> ;
.

drivetrain:CondEncounterShortcut 
  a drivetrain:DatatypeConnectionRecipe ;
  drivetrain:multiplicity drivetrain:1-1 ;
  drivetrain:object drivetrain:condition_visit_occurrence_id_IntegerLiteralValue ;
  drivetrain:predicate <http://api.stardog.com/condition_occurrence#visit_occurrence_id> ;
  drivetrain:subject <http://api.stardog.com/condition_occurrence> ;
.

drivetrain:CondKeysymShortcut 
  a drivetrain:DatatypeConnectionRecipe ;
  drivetrain:multiplicity drivetrain:1-1 ;
  drivetrain:object drivetrain:condition_occurrence_id_IntegerLiteralValue ;
  drivetrain:predicate <http://api.stardog.com/condition_occurrence#condition_occurrence_id> ;
  drivetrain:subject <http://api.stardog.com/condition_occurrence> ;
.

drivetrain:CondStartDatetimeShortcut 
  a drivetrain:DatatypeConnectionRecipe ;
  drivetrain:multiplicity drivetrain:1-1 ;
  drivetrain:object drivetrain:condition_start_datetime_DateLiteralValue ;
  drivetrain:predicate <http://api.stardog.com/condition_occurrence#condition_start_datetime> ;
  drivetrain:subject <http://api.stardog.com/condition_occurrence> ;
.

drivetrain:CondMentionedClassFromValueRule
  a drivetrain:TurboGraphVariableManipulationLogic ;
  drivetrain:usesSparql """
  BIND(uri(concat('http://purl.bioontology.org/ontology/SNOMEDCT/', ${dependent} )) as  ${replacement} )
"""  ;
.
drivetrain:CondMentionedClassList 
  drivetrain:usesCustomVariableManipulationRule drivetrain:CondMentionedClassFromValueRule .
  
### diag aboutness

drivetrain:post_icbo_synthea_omop_cnp_diagnosis_aboutness 
  a ontologies:TURBO_0010354 ;
  drivetrain:hasOutput drivetrain:DiagAboutPat ;
  drivetrain:hasOutput drivetrain:DiagAboutnessAxiomDbXrefHasRepresentation ;
  drivetrain:hasOutput drivetrain:DiagAboutnessAxiomDbXrefPartOfColumn ;
  drivetrain:hasOutput drivetrain:DiagAboutnessAxiomHasDbXref ;
  drivetrain:hasOutput drivetrain:DiagAboutnessAxiomProp ;
  drivetrain:hasOutput drivetrain:DiagAboutnessAxiomSource ;
  drivetrain:hasOutput drivetrain:DiagAboutnessAxiomTarget ;
  drivetrain:hasOutput drivetrain:DiagKeyDenotesProv4Aboutness ;
  drivetrain:hasRequiredInput drivetrain:DiagExpansion ;
  drivetrain:hasRequiredInput drivetrain:DiagPatientShortcut ;
  drivetrain:hasRequiredInput drivetrain:HardcodedPatientSourceden ;
  drivetrain:hasRequiredInput drivetrain:KeyDenotesDiagInp ;
  drivetrain:hasRequiredInput drivetrain:KeyDenotesPatient ;
  drivetrain:hasRequiredInput drivetrain:PatKeySymbHasRepresentation ;
  drivetrain:hasRequiredInput drivetrain:PatKeySymbPartOfKey ;
  drivetrain:hasRequiredInput drivetrain:PatientExpansionSpecification ;
  drivetrain:inputNamedGraph ontologies:omopShortcuts ;
  drivetrain:outputNamedGraph ontologies:omopExpanded ;
  drivetrain:precedes drivetrain:post_icbo_synthea_omop_cnp_diagnosis_parthood ;
.

drivetrain:DiagPatientShortcut 
  a drivetrain:DatatypeConnectionRecipe ;
  drivetrain:multiplicity drivetrain:1-1 ;
  drivetrain:subject <http://api.stardog.com/condition_occurrence> ;
  drivetrain:predicate <http://api.stardog.com/condition_occurrence#person_id> ;
  drivetrain:object drivetrain:person_id_IntegerLiteralValue ;
.

drivetrain:KeyDenotesDiagInp
  a drivetrain:objectConnectionToInstanceRecipe ;
  drivetrain:multiplicity drivetrain:1-1 ;
  drivetrain:object obo:OGMS_0000073 ;
  drivetrain:predicate obo:IAO_0000219 ;
  drivetrain:referencedInGraph ontologies:omopExpanded ;
  drivetrain:subject ontologies:TURBO_0010433 ;
  drivetrain:subjectUsesContext drivetrain:DiagDenotationContext ;
.

### diag parthood

drivetrain:post_icbo_synthea_omop_cnp_diagnosis_parthood
  a ontologies:TURBO_0010354 ;
  drivetrain:hasOutput drivetrain:EncHsoDiag ;
  drivetrain:hasOutput drivetrain:DiagKeyDenotesProv4Parthood ; 
  drivetrain:hasOutput drivetrain:DiagParthoodAxiomDbXrefHasRepresentation ;
  drivetrain:hasOutput drivetrain:DiagParthoodAxiomDbXrefPartOfColumn ;
  drivetrain:hasOutput drivetrain:DiagParthoodAxiomHasDbXref ;
  drivetrain:hasOutput drivetrain:DiagParthoodAxiomProp ;
  drivetrain:hasOutput drivetrain:DiagParthoodAxiomSource ;
  drivetrain:hasOutput drivetrain:DiagParthoodAxiomTarget ;
  drivetrain:hasRequiredInput drivetrain:EncExpansionSpecification ;
  drivetrain:hasRequiredInput drivetrain:EncKeySymbHasRepresentation ;
  drivetrain:hasRequiredInput drivetrain:EncKeySymbPartOfKey ;
  drivetrain:hasRequiredInput drivetrain:EncTypingRecipe ;
  drivetrain:hasRequiredInput drivetrain:HardcodedEncSourceden ;
  drivetrain:hasRequiredInput drivetrain:KeyDenotesEnc ;
  drivetrain:hasRequiredInput drivetrain:KeyDenotesDiagInp ;
  drivetrain:hasRequiredInput drivetrain:DiagEncShortcut ;
  drivetrain:hasRequiredInput drivetrain:DiagExpansion ;
  drivetrain:inputNamedGraph ontologies:omopShortcuts ;
  drivetrain:outputNamedGraph ontologies:omopExpanded ;
  # drivetrain:precedes drivetrain:post_icbo_synthea_omop_cnp_condition_occurrence ;
.

drivetrain:DiagEncShortcut 
  a drivetrain:DatatypeConnectionRecipe ;
  drivetrain:multiplicity drivetrain:1-1 ;
  drivetrain:object drivetrain:visit_occurrence_id_IntegerLiteralValue ;
  drivetrain:predicate <http://api.stardog.com/condition_occurrence#visit_occurrence_id> ;
  drivetrain:subject <http://api.stardog.com/condition_occurrence> ;
.

###

# |drug_type_concept_id|count|
# |--------------------|-----|
# |38000177|8468|
# |581452|22798|

# |concept_id|concept_name|
# |----------|------------|
# |581452|Dispensed in Outpatient office|
# |38000177|Prescription written|

# drivetrain:regdenFromShorts a drivetrain:objectConnectionToClassRecipe ;
  # drivetrain:multiplicity drivetrain:1-1 ;
  # drivetrain:required true ;
  # drivetrain:subject ontologies:TURBO_0010158 ;
  # drivetrain:predicate drivetrain:assertedRegden ;
  # drivetrain:object drivetrain:allowedEncRegdenList ;
# .

# drivetrain:EncClassList 
  # drivetrain:usesCustomVariableManipulationRule drivetrain:encClassFromValueRule .
  
# drivetrain:encClassFromValueRule
  # a drivetrain:TurboGraphVariableManipulationLogic ;
  # drivetrain:usesSparql """
  # BIND(IF (${dependent} = 9203, obo:OGMS_0000101, ?unbound) AS ?edEncClass) 
  # BIND(IF (${dependent} = 9201, obo:OGMS_0000100, ?unbound) AS  ?inpatientEncClass) 
  # BIND(IF (${dependent} = 9202, obo:OGMS_0000099, ?unbound) AS ?outpatientEncClass) 
  # bind(coalesce(?edEncClass, ?inpatientEncClass, ?outpatientEncClass, obo:OGMS_0000097) as ${replacement})
  # #BIND(IF (bound(?edEncClass),?edEncClass, ?unbound) as ${replacement}) 
  # #BIND(IF (bound(?inpatientEncClass),?inpatientEncClass, ${replacement}) as ${replacement}) 
  # #BIND(IF (bound(?outpatientEncClass),?outpatientEncClass, ${replacement}) as ${replacement}) 
  # #BIND(IF (bound(${replacement}),${replacement},obo:OGMS_0000097) as ${replacement})
# """  ;
# .

# drivetrain:ProcClassList drivetrain:usesCustomVariableManipulationRule drivetrain:ProcClassFromValueRule .

# drivetrain:ProcClassFromValueRule
  # a drivetrain:TurboGraphVariableManipulationLogic ;
  # drivetrain:usesSparql """
  # BIND(IF (${dependent} = "76601001", obo:OBI_0000934, ?unbound) AS ?imInjClass) 
  # BIND(IF (${dependent} = "5880005", obo:OGMS_0000057, ?unbound) AS ?physExamClass) 
  # bind(coalesce(?imInjClass, ?physExamClass, obo:OGMS_0000096) as ${replacement})
# """  ;
# .

# drivetrain:syntheaomop_post_icbo a owl:Class .
# drivetrain:cdm_synthea10 a owl:Class .
# drivetrain:procedure_occurrence a owl:Class .

# drivetrain:GidClassList drivetrain:usesCustomVariableManipulationRule drivetrain:GidClassFromValueRule .
# drivetrain:GidClassFromValueRule
  # a drivetrain:TurboGraphVariableManipulationLogic ;
  # drivetrain:usesSparql """
  # BIND(IF (${dependent} = 8532, obo:OMRSE_00000138, ?unbound) AS ?femGidClass) 
  # BIND(IF (${dependent} = 8507, obo:OMRSE_00000141, ?unbound) AS ?maleGidClass) 
  # bind(coalesce(?femGidClass, ?maleGidClass, obo:OMRSE_00000133) as ${replacement})
# """  ;
# .
