<http://api.stardog.com/visit_occurrence> a owl:Class .

# _ is wildcard 
ontologies:post_icbo_synthea_omop_cnp_inputs
  a ontologies:TURBO_0010178 ;
  ontologies:hasOutput ontologies:cridDenotesHce ;
  ontologies:hasOutput ontologies:cridsymbHasRepresentation ;
  ontologies:hasOutput ontologies:hceExpansionSpecification ;
  ontologies:hasOutput ontologies:symbolPartOfCridForHce ;
  ontologies:hasRequiredInput ontologies:miniHceCridsymShortcut ;
  ontologies:hasOutput ontologies:hardcodedRegden_octtr ;
  ontologies:inputNamedGraph ontologies:omopShortcuts ;
  ontologies:outputNamedGraph ontologies:omopExpanded ;
  ontologies:hasRequiredInput ontologies:miniHceEnddateShortcut ;
  ontologies:hasOutput ontologies:procboundEndsEnc ;
  ontologies:hasOutput ontologies:endingTmdAboutProcbound ;
  ontologies:hasOutput ontologies:endingTmdHasMeasVal ;
  ontologies:hasRequiredInput ontologies:miniHceStartdateShortcut ;
  ontologies:hasOutput ontologies:procboundStartsEnc ;
  ontologies:hasOutput ontologies:startingTmdAboutProcbound ;
  ontologies:hasOutput ontologies:startingTmdHasMeasVal ;
  ontologies:hasRequiredInput ontologies:miniHceTypeShortcut ;
  ontologies:hasOutput ontologies:encounterTypingRecipe ;
.
  
  
ontologies:miniHceCridsymShortcut 
  a ontologies:DatatypeConnectionRecipe ;
  ontologies:multiplicity <http://transformunify.org/ontologies/1-1> ;
  ## ontologies:required true ;
  ontologies:subject <http://api.stardog.com/visit_occurrence> ;
  ontologies:predicate <http://api.stardog.com/visit_occurrence#visit_occurrence_id> ;
  ontologies:object ontologies:visit_occurrence_id_StringLiteralValue ;
.

ontologies:miniHceStartdateShortcut 
  a ontologies:DatatypeConnectionRecipe ;
  ontologies:multiplicity <http://transformunify.org/ontologies/1-1> ;
  ## ontologies:required true ;
  ontologies:subject <http://api.stardog.com/visit_occurrence> ;
  ontologies:predicate <http://api.stardog.com/visit_occurrence#visit_start_date> ;
  ontologies:object ontologies:visit_start_date_DateLiteralValue ;
.

ontologies:miniHceEnddateShortcut 
  a ontologies:DatatypeConnectionRecipe ;
  ontologies:multiplicity <http://transformunify.org/ontologies/1-1> ;
  ## ontologies:required true ;
  ontologies:subject <http://api.stardog.com/visit_occurrence> ;
  ontologies:predicate <http://api.stardog.com/visit_occurrence#visit_end_date> ;
  ontologies:object ontologies:visit_end_date_DateLiteralValue ;
.

ontologies:encClassFromValueRule
  a ontologies:TurboGraphVariableManipulationLogic ;
  ontologies:usesSparql """
  BIND(IF (${dependent} = 9203, obo:OGMS_0000101, ?unbound) AS ?edEncClass) 
  BIND(IF (${dependent} = 9201, obo:OGMS_0000100, ?unbound) AS  ?inpatientEncClass) 
  BIND(IF (${dependent} = 9202, obo:OGMS_0000099, ?unbound) AS ?outpatientEncClass) 
  bind(coalesce(?edEncClass, ?inpatientEncClass, ?outpatientEncClass, obo:OGMS_0000097) as ${replacement})
  # BIND(IF (bound(?edEncClass),?edEncClass, ?unbound) as ${replacement}) 
  # BIND(IF (bound(?inpatientEncClass),?inpatientEncClass, ${replacement}) as ${replacement}) 
  # BIND(IF (bound(?outpatientEncClass),?outpatientEncClass, ${replacement}) as ${replacement}) 
  # BIND(IF (bound(${replacement}),${replacement},obo:OGMS_0000097) as ${replacement})
"""  ;
.

ontologies:miniHceTypeShortcut 
  a ontologies:DatatypeConnectionRecipe ;
  ontologies:multiplicity <http://transformunify.org/ontologies/1-1> ;
  ## ontologies:required true ;
  ontologies:subject <http://api.stardog.com/visit_occurrence> ;
  ontologies:predicate <http://api.stardog.com/visit_occurrence#visit_concept_id> ;
  ontologies:object ontologies:visit_type_IntegerLiteralValue ;
  ontologies:objectRequiredToCreate ontologies:EncounterClassList ;
.

ontologies:EncounterClassList ontologies:usesCustomVariableManipulationRule ontologies:encClassFromValueRule .


# ontologies:regdenFromShorts a ontologies:ObjectConnectionToClassRecipe ;
  # ontologies:multiplicity <http://transformunify.org/ontologies/1-1> ;
  # ontologies:required true ;
  # ontologies:subject ontologies:TURBO_0010158 ;
  # ontologies:predicate ontologies:assertedRegden ;
  # ontologies:object ontologies:allowedEncounterRegdenList ;
# .

# run printQuery http://transformunify.org/ontologies/post_icbo_synthea_omop_cnp_inputs
# run            http://transformunify.org/ontologies/post_icbo_synthea_omop_cnp_inputs
